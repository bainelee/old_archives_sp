# Context 节省使用指南

本文件供开发者查阅，记录如何在新 Agent 对话中减少 context 消耗、同时保持项目理解能力。

## 1. 新对话首条消息模板

建议首条消息包含：任务、相关文件、规则来源。

```
任务：[具体要做什么]
相关：[map_editor.gd / room_info.json / ...]
规则：.cursor/rules 中有场景编辑器和房间信息规范
```

这样 Agent 会优先加载 AGENTS.md 和匹配的 rules，而不是盲目搜索。

## 2. 对话粒度

- 一个任务或一个功能点 → 一个对话
- 重要结论 → 沉淀到 `.cursor/rules` 或 `docs`，而不是在新对话中重复粘贴历史

## 3. 引用历史对话

需要时可在新对话中说明：

> 参考之前关于 [主题] 的讨论

由 Agent 按需查找 `agent-transcripts/` 中的记录，避免粘贴大段历史。

## 4. 后续新规则原则

- 优先使用 `globs`，不新增 `alwaysApply: true`
- 单条规则控制在约 50 行内
- 复杂内容放到 docs，规则只写要点并引用文档
