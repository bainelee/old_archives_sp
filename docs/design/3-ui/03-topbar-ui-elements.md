# TopBar UI 元素与信息说明

本文档说明游戏主界面 **TopBar（顶栏）** 上显示的各项信息及其在游戏中的作用。

---

## 1. 布局概览

TopBar 从左到右依次为：

**因子 | 货币 | 时间控制 | 人员 | 庇护·侵蚀**

---

## 2. 因子（Factors）

档案馆建设与运转所需的基础资源，共四种。

| 显示名称 | 作用 | 获取途径 |
|----------|------|----------|
| **认知因子** | 等同食物。研究员和调查员按人数持续消耗认知因子（1 人/时 = 1 认知）。不足时影响可利用性并提高被侵蚀概率 | 在**图书室**建设研究区生产 |
| **计算因子** | 等同燃料。档案馆核心消耗计算因子提供「文明的庇佑」，使档案馆免疫神秘侵蚀 | 在**机房**建设研究区生产 |
| **意志因子** | 等同素材。造物区房间（实验室、推理室）持续消耗意志因子产出权限或信息；意志不足时停工 | 在**教学室**建设研究区生产 |
| **权限因子** | 等同建材。建设各种区域（研究区、造物区、生活区、事务所区）都需消耗权限因子 | 档案馆核心微量产出；**资料库**研究区生产；**实验室**造物区消耗意志生产 |

---

## 3. 货币（Currency）

| 显示名称 | 作用 | 获取途径 |
|----------|------|----------|
| **信息** | 基础货币。清理房间、建设、科研等行为需消耗信息 | 研究员人数按效率持续产生；**推理室**造物区消耗意志生产 |
| **真相** | 高级货币。用于房间高阶改造、雇佣英杰等 | 外派调查员解决案件获得 |

---

## 4. 时间控制（TimePanel）

| 元素 | 作用 |
|------|------|
| **播放/暂停** | 流逝时显示 ▶，暂停时显示 ⏸；点击切换 |
| **1x / 2x / 6x / 96x** | 游戏时间倍速（3 秒现实 = 1 游戏小时） |
| **时间文本** | 当前游戏时间，格式如「14时 第5天 第2周」 |
| **时间指示器** | 时间流动时旋转的箭头图元 |

---

## 5. 人员（Personnel）

| 显示名称 | 格式/含义 | 作用说明 |
|----------|-----------|----------|
| **研究员** | 空闲/总数（如 8/10） | 基础人力资源。空闲 = 总数 − 被侵蚀 − 清理中 − 建设中 − 房间工作。研究员消耗认知、产出信息；清理、建设需占用研究员。悬停显示详情（总数、被侵蚀、清理中、建设中、房间工作、空闲） |
| **被侵蚀** | 数值 | 被神秘侵蚀的研究员数量。被侵蚀者不工作，返回生活区休息，长期未治愈有死亡风险。庇护等级妥善/完美时有机会被治愈 |
| **调查员** | 数值 | 可外派调查、破解案件、获得真相的人员。在事务所遗址上建设事务所区后获得，调查过程中可能永久失去 |

> **劳动力**：当前版本暂不使用，仅使用研究员数量。

---

## 6. 庇护 · 侵蚀（ShelterErosionPanel）

| 区域 | 显示内容 | 作用说明 |
|------|----------|----------|
| **左侧侵蚀标识** | 当前侵蚀等级（如：薄弱、显性、轻度等） | 反映档案馆整体受「莱卡昂」神秘侵蚀的程度。等级越负（-2、-4、-8）越危险，研究员易被侵蚀。悬停显示侵蚀来源（显性侵蚀、文明的庇佑等） |
| **右侧周期长条** | 90 天内的侵蚀变化预测，彩色条随时间向左滚动 | 颜色对应：白(+1)、翠绿(0)、橙(-2)、赤(-4)、深紫(-8)。悬停显示「距离现在Xd 等级名 数值」 |

---

## 7. 悬停与交互

- **研究员区域**：悬停显示 ResearcherHoverPanel（总数、被侵蚀、清理中、建设中、房间工作、空闲）
- **左侧侵蚀标识**：悬停显示侵蚀来源详情
- **右侧周期条**：悬停显示对应时间点的预测等级
- **清理/建设模式**：进入时部分 TopBar 区域可能禁用或隐藏灾厄条

---

## 8. 数据来源与刷新

| 数据 | 来源 | 刷新时机 |
|------|------|----------|
| 因子、货币、人员 | UIMain 属性 / SaveManager 存档 | 清理完成、建设完成、存档加载、资源消耗/授予时调用 `_sync_resources_to_topbar()` |
| 时间 | GameTime Autoload | 每帧时间推进 |
| 侵蚀 | ErosionCore Autoload | 周期条滚动、时间推进 |

---

## 相关文档

- [02 - 主 UI 设计概览与规范](02-ui-main-overview.md) — 布局与实现
- [名词解释](../../名词解释.md) — 游戏内专有名词
- [02 - 时间流逝系统](../2-gameplay/02-time-system.md)
- [01 - 庇护/侵蚀 UI](01-shelter-erosion-ui.md)
